<% provide(:title, 'Show Scope') %>

<% if signed_in? %>

  <h1>Scope: <%= @scope.code %></h1>

  <ul class="mid_menu">
    <li><%= link_to 'Edit', edit_scope_path(@scope) %> |</li>
    <li><%= link_to 'Back', scope_path %> | </li>
    <li><%= link_to 'Destroy', @scope, confirm: 'Are you sure?', method: :delete %></li>
  </ul>

<p id="notice"><%= notice %></p>

  <div class="tabbable">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#tab1" data-toggle="tab">Definition</a></li>
      <li><a href="#tab2" data-toggle="tab">Ownership</a></li>
      <li><a href="#tab3" data-toggle="tab">Query</a></li>    
      <li><a href="#tab4" data-toggle="tab">Connection</a></li>
      <!-- li class="inactive"><a href="#tab5" data-toggle="tab">Sample data</a></li -->    
    </ul>
    <div class="tab-content">
  
    <div class="tab-pane active" id="tab1">
<!-- Tab content -->
      <table>
        <tr>
           <td align="right"><b>Description:</b>
           </td>
           <td><%= @scope.description %>
           </td>
        </tr>
        <tr>
          <td align="right"><b>Organisation level:</b>
          </td>
          <td><%= @scope.organisation_level %>
          </td>
        </tr>
      </table>
<!-- Tab content -->
    </div>    

    <div class="tab-pane" id="tab2">
<!-- Tab content -->
      <table>
        <tr>
          <td align="right"><b>Name:</b>
          </td>
          <td><%= @scope.name %>
          </td>
          <td align="right"><b>Created by:</b>
          </td>
          <td><%= @scope.created_by %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Code:</b>
          </td>
          <td><%= @scope.code %>
          </td>
          <td align="right"><b>Created at:</b>
          </td>
          <td><%= @scope.created_at %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Id:</b>
          </td>
          <td><%= @scope.id %>
          </td>
          <td align="right"><b>Updated by:</b>
          </td>
          <td><%= @scope.updated_by %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Belongs to:</b>
          </td>
          <td><%= @scope.landscape_id %>
          </td>
          <td align="right"><b>Updated at:</b
          </td>
          <td><%= @scope.updated_at %>
          </td>
        </tr>
      </table>
<!-- Tab content -->
    </div>
    
    <div class="tab-pane" id="tab3">        
<!-- Tab content -->
      <table>
         <tr>
          <td align="right"><b>Tables list:</b>
          </td>
          <td><%= @scope.tables_list %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Join expression:</b>
          </td>
          <td><%= @scope.join_expression %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Where clause:</b>
          </td>
          <td><%= @scope.where_clause %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Group By clause:</b>
          </td>
          <td><%= @scope.group_by_clause %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Having clause:</b>
          </td>
          <td><%= @scope.having_clause %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Key columns:</b>
          </td>
          <td><%= @scope.key_columns %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>Published columns:</b>
          </td>
          <td><%= @scope.published_columns %>
          </td>
        </tr>
      </table>
    </div>
              
    <div class="tab-pane" id="tab4">        
<!-- Tab content -->
      <table>
        <tr>
          <td align="right"><b>DB technology:</b>
          </td>
          <td><%= @scope.db_technology %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>DB connection:</b>
          </td>
          <td><%= @scope.db_connection %>
          </td>
        </tr>
        <tr>
          <td align="right"><b>DB owner schema:</b>
          </td>
          <td><%= @scope.db_owner_schema %>
          </td>
        </tr>
      </table>
<!-- Tab content -->
    </div>

    </div>
  </div>
    
<table width=100%>
  <tr><td><hr /></td></tr>
  <tr align="left">
    <th>Linked Business Rules</th>
    <th></th>
  </tr>
  <tr>
    <td>
      <table class="table table-striped table-condensed">
        <%@scope.business_rules.each do |business_rule| %>
        <tr align="left">
          <td valign="top"> <%=link_to business_rule.code, business_rule%> </td>
          <td valign="top"> <%=business_rule.name%> </td>
          <td valign="top"> <%=business_rule.description%> </td>
          <td> </td>
        </tr>
        <% end%>
      </table>
    </td>
  </tr>
  <tr>
    <td>
      <!-- %= link_to 'Add business rule', new_scope_business_rule_path(@scope) % -->
    </td>
  </tr>
</table>

<% else %>

You must log in to access this page.

<%= link_to ' Click here', root_path %>

<% end %>




