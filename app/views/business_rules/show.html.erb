<% provide(:title, (t('ManagingBRs'))) %>

<% content_for :page_heading do %>
    <%= image_tag(index_audit_tag_for(@business_rule), :alt => "Quality hit") %> <%= t('BR') %>: <%= @business_rule.name %>
<% end %>
<% content_for :breadcrums do %>
  <ul class="breadcrumbs">
    <li>> <%= link_to @business_rule.business_process.business_flow.business_area.name, @business_rule.business_process.business_flow.business_area %> > </li>
    <li><%= link_to @business_rule.business_process.business_flow.name, @business_rule.business_process.business_flow %> > </li>
    <li><%= link_to @business_rule.business_process.name, @business_rule.business_process %> > </li>
    <li><%= @business_rule.name %> </li>
  </ul>
<% end %>  
  
  <ul class="mid_menu">
    <li><%= link_to t('Edit'), edit_business_rule_path(@business_rule) %> |</li>
    <li><%= link_to t('Up'), @business_rule.business_process %> |</li>
    <li><%= link_to t('Destroy'), @business_rule, confirm: t('Sure'), method: :delete %></li>
  </ul>

<!-- <p id="notice"><%= notice %></p> -->


  <div class="tabbable">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#definition" data-toggle="tab"> <%= t('Definition') %> </a></li>
      <li><a href="#tab2" data-toggle="tab"> <%= t('Metrics') %> </a></li>
      <li><a href="#tab3" data-toggle="tab"> <%= t('Implementation') %> </a></li>    
      <li><a href="#tab4" data-toggle="tab"> <%= t('Solving') %> </a></li>
      <li><a href="#tab5" data-toggle="tab"> <%= t('Rejected') %> </a></li> 
      <li><a href="#tab6" data-toggle="tab"> <%= t('WhiteList') %> </a></li> 
      <li><a href="#tab7" data-toggle="tab"> <%= t('PendingUpd') %> </a></li> 
      <li><a href="#ownership" data-toggle="tab"> <%= t('Ownership') %> </a></li>
    </ul>
    <div class="tab-content">
 
    <div class="tab-pane active" id="definition">
<!-- Tab content for Definition -->

      <div class="row">
         <div class="col-md-2 text-right"> <%= t('RuleType') %>:
         </div>
         <div class="col-md-2"><%= @business_rule.rule_type.name%>
         </div>
      </div>
      
        <%= render partial: "shared/object_definition", locals: {this_object: @business_rule} %>

      <div class="row">
        <div class="col-md-2 text-right"><%= t('BValue') %>:
        </div>
        <div class="col-md-6"><pre><%= @business_rule.business_value %></pre>
        </div>
      </div>

<!-- Tab content -->
    </div>

    <div class="tab-pane" id="tab2">
<!-- Tab content for Metrics -->
      
        <div class="row">
          <div class="col-md-2 text-right"> <%= t('Complexity') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.complexity.name %>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('AValue') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.added_value %> <%= display_currency%>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('Severity') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.severity.name %>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('MCost') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.maintenance_cost %> <%= display_currency%>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('MWorkload') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.maintenance_duration %> <%= display_duration%>
          </div>
        </div>

<!-- Tab content -->
    </div>
 
    <div class="tab-pane" id="tab3">
<!-- Tab content for Implementation -->
      
        <div class="row">
          <div class="col-md-2 text-right"> <%= t('Object') %>:
          </div>
          <div class="col-md-2"><%= link_to @business_rule.business_object.name, @business_rule.business_object %>
          </div>
          <div class="col-md-2 text-right"> <%= t('BP') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.business_process.name%>
          </div>
        </div>
      
        <div class="row">
          <div class="col-md-2 text-right"> <%= t('ChkDescription') %>:
          </div>
          <div class="col-md-6"><pre><%= @business_rule.check_description %></pre>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('ChkScript') %>:
          </div>
          <div class="col-md-6"><pre><%= @business_rule.check_script %></pre>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('GCondition') %>:
          </div>
          <div class="col-md-6"><pre><%= @business_rule.condition %></pre>
          </div>
        </div>

<!-- Tab content -->
    </div>

    <div class="tab-pane" id="tab4">
<!-- Tab content for Solving -->
      
        <div class="row">
          <div class="col-md-2 text-right" width="200"> <%= t('CorMethod') %>:
          </div>
          <div class="col-md-6"><pre><%= @business_rule.correction_method %></pre>
          </div>
        </div>

        <div class="row">
          <div class="col-md-2 text-right"> <%= t('CorScript') %>:
          </div>
          <div class="col-md-6"><pre><%= @business_rule.correction_script %></pre>
          </div>
        </div>
      
        <div class="row">
          <div class="col-md-2 text-right"> <%= t('CorBatch') %>:
          </div>
          <div class="col-md-2"><%= @business_rule.correction_batch %>
          </div>
        </div>
      
<!-- Tab content -->
    </div>
    
    <div class="tab-pane" id="tab5">
      <%= render partial: "shared/breaches_list", locals: {this_object: @business_rule} %>
    </div>
    

    
    <div class="tab-pane" id="tab6">
<!-- Tab content for White list -->
      
<table width=100%>
  <tr><td><hr /></td></tr>
  <tr align="left">
    <th> <%= t('WhiteList') %></th>
    <th></th>
  </tr>
  <tr>
    <td>
      <table class="table table-striped table-condensed">
        <tr align="left">
          <th> <%= @business_rule.business_object.skills.name %> </th>
          <th> <%= @business_rule.business_object.skills.name %> </th>
          <th>  <%= t('UpdatedBy') %> </th>
          <th>  <%= t('UpdatedAt')%> </th>
          <th>  <%= t('Observation') %> </th>
        </tr>
        <!--
        <%@business_rule.breaches.each do |breach| %>
        <tr align="left">
          <td valign="top"> <%=link_to breach.pk_values, edit_breach_path(breach) %> </td>
          <td valign="top"> <%=breach.current_values %> </td>
          <td valign="top"> <%=breach.updated_by %> </td>
          <td valign="top"> <%=breach.updated_at %> </td>
          <td valign="top"> <%=breach.description %> </td>
        </tr>
        <% end%>
        -->
      </table>
    </td>
  </tr>
</table>

<!-- Tab content -->
    </div>
    
    <div class="tab-pane" id="tab7">
<!-- Tab content for Pending updates -->
      
<table width=100%>
  <tr><td><hr /></td></tr>
  <tr align="left">
    <th> <%= t('PendingUpd') %></th>
    <th></th>
  </tr>
  <tr>
    <td>
      <table class="table table-striped table-condensed">
        <tr align="left">
          <th> <%= @business_rule.business_object.skills.name %> </th>
          <th> <%= @business_rule.business_object.skills.name %> </th>
          <th>  <%= t('UpdatedBy') %> </th>
          <th>  <%= t('UpdatedAt')%> </th>
          <th>  <%= t('Observation') %> </th>
        </tr>
        <%@business_rule.breaches.each do |breach| %>
        <tr align="left">
          <td valign="top"> <%=link_to breach.pk_values, edit_breach_path(breach) %> </td>
          <td valign="top"> <%=breach.current_values %> </td>
          <td valign="top"> <%=breach.updated_by %> </td>
          <td valign="top"> <%=breach.updated_at %> </td>
          <td valign="top"> <%=breach.description %> </td>
        </tr>
        <% end%>
      </table>
    </td>
  </tr>
</table>
      
<!-- Tab content -->
    </div>
    
    <div class="tab-pane" id="ownership">
      <%= render partial: "shared/object_ownership", locals: {this_object: @business_rule} %>
    </div>
   
    </div>
  </div>
    








