<% provide(:title, 'Managing territories') %>

  <h1>Territory: <%= @territory.name %></h1>
      
  <ul class="mid_menu">
    <li><%= link_to 'Edit', edit_territory_path(@territory) %> |</li>
    <li><%= link_to 'Back', @territory.parent_territory %> |</li>
    <li><%= link_to 'Destroy', @territory, confirm: 'Are you sure?', method: :delete %></li>
  </ul>

<!-- <p id="notice"><%= notice %></p> -->

  <div class="tabbable">
    <ul class="nav nav-tabs">
      <li class="active"><a href="#tab1" data-toggle="tab">Definition</a></li>
      <li><a href="#tab2" data-toggle="tab">Ownership</a></li>
    </ul>
    <div class="tab-content">

    <div class="tab-pane active" id="tab1">
<!-- Tab content for Definition -->

      <div class="row">
        <div class="span2 text-right">Name:
        </div>
        <div class="span6"><%= @territory.name%>
        </div>
        <div class="span1 text-right">Code:
        </div>
        <div class="span1"><%= @territory.code%>
        </div>
        <div class="span1 text-right">Status:
        </div>
        <div class="span1"><%= @territory.status.name%>
        </div>
      </div>

      <div class="row">
        <div class="span2 text-right">Description:
        </div>
        <div class="span6"><%= @territory.description%>
        </div>
      </div>

      <div class="row">
        <div class="span2 text-right">Hierarchy:
        </div>
        <div class="span2"><%= @territory.hierarchy%>
        </div>
      </div>

<!-- Tab content -->
    </div>    

    <div class="tab-pane" id="tab2">
<!-- Tab content for Ownership -->

      <div class="row">
        <div class="span2 text-right">Unique id:
        </div>
        <div class="span2"><%= @territory.id%>
        </div>
        <div class="span2 text-right">Created by:
        </div>
        <div class="span2"><%= @territory.created_by%>
        </div>
      </div>
      <div class="row">
        <div class="span2 text-right">Playground id:
        </div>
        <div class="span2"><%= @territory.playground_id%>
        </div>
        <div class="span2 text-right">Created at:
        </div>
        <div class="span2"><%= @territory.created_at%>
        </div>
      </div>
      <div class="row">
        <div class="span2 text-right">Owner:
        </div>
        <div class="span2"><%= @territory.owner.login%>
        </div>
        <div class="span2 text-right">Updated by:
        </div>
        <div class="span2"><%= @territory.updated_by%>
        </div>
      </div>
      <div class="row">
        <div class="span2 text-right">Parent:
        </div>
        <div class="span2"><%= link_to @territory.parent_territory.name, @territory.parent_territory %>
        </div>
        <div class="span2 text-right">Updated at:
        </div>
        <div class="span2"><%= @territory.updated_at%>
        </div>
      </div>

<!-- Tab content -->
    </div>
    
    </div>
  </div>

<table width=100%>    
  <tr><td><hr /></td></tr>
  <tr align="left">
    <th>Linked territories</th>
    <th></th>
  </tr>
  <tr>
    <td>
      <table class="table table-striped table-condensed">
        <tr align="left">
          <th> Code </th>
          <th> Name </th>
          <th> Description </th>
          <th> Updated by </th>
          <th> Updated at </th>
        </tr>
        <%@territory.child_territories.order("code ASC").each do |child_territory| %>
        <tr align="left">
          <td valign="top"> <%=link_to child_territory.code, child_territory%> </td>
          <td valign="top"> <%=child_territory.name%> </td>
          <td class="col_wide"> <%=child_territory.description%> </td>
          <td valign="top"> <%=child_territory.updated_by%> </td>
          <td valign="top"> <%=child_territory.updated_at%> </td>
        </tr>
        <% end%>
      </table>
    </td>
  </tr>
  <tr>
    <td>
      <%= link_to 'Add territory', new_territory_territory_path(@territory) %>
    </td>
  </tr>
</table>



